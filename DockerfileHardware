FROM ubuntu:19.10

RUN apt-get update && \
    apt install -y \
    apt-utils \
    libzip-dev \
    nano \
    php7.3-zip \
    wget

RUN wget http://phoronix-test-suite.com/releases/repo/pts.debian/files/phoronix-test-suite_9.6.0_all.deb && \
    dpkg -i phoronix-test-suite_9.6.0_all.deb || true && \
    apt-get -f install -y && \
    dpkg -i phoronix-test-suite_9.6.0_all.deb

RUN phoronix-test-suite install pts/sysbench \
                                pts/osbench \
                                pts/pybench \
                                pts/tiobench \
                                pts/fio \
                                pts/ramspeed \
                                pts/compress-gzip \
                                pts/compress-7zip \
                                pts/openssl \
                                pts/network-loopback \
                                pts/sockperf

COPY hardware/suite-definition.xml /var/lib/phoronix-test-suite/test-suites/local/hardware/suite-definition.xml